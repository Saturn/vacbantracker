{% extends 'base.j2' %}

{% block title %}Profile{% endblock title %}

{% block content %}


{% macro bool_fmt(value) %}
{% if value %}
<span class="text-danger">{{ value }}</span>
{% else %}
<span class="text-success">{{ value }}</span>
{% endif %}
{% endmacro %}

{% macro print_timecreated(dt) %}
{% if dt %}
{{ dt | pretty_date }}
{% else %}
Unknown
{% endif %}
{% endmacro %}

<div class="row">
  <div class="col-lg-8">
    <h3>Steam Profile</h3>
    <hr />
  </div>
</div>

<div class="row">
  <div class="col-lg-8">

    <div class="card">
      <div class="card-body">
        <h3 class="card-title">{{ profile.personaname }}</h3>
        <p><a href="https://steamcommunity.com/profiles/{{ profile.steamid }}" target="_blank">https://steamcommunity.com/profiles/{{ profile.steamid }}</a></p>
        <p></p>

        <div class="row">

          <div class="col-xs-5">
            <table class="table table-sm steam-profile-table steam-profile-table-ids">
              <tbody>
                <tr>
                  <td>Steam Name</td>
                  <td>{{ profile.personaname }}</td>
                </tr>
                <tr>
                  <td>SteamID</td>
                  <td>{{ profile.steamid_ }}</td>
                </tr>
                <tr>
                  <td>SteamID64</td>
                  <td>{{ profile.steamid }}</td>
                </tr>
                <tr>
                  <td>SteamID3</td>
                  <td>{{ profile.steamid3 }}</td>
                </tr>
                <tr>
                  <td>Created</td>
                  <td>{{ print_timecreated(profile.timecreated) }}</td>
                </tr>
                {% if profile.vanityurl %}
                <tr>
                  <td>Vanity URL</td>
                  <td>{{ profile.vanityurl }}</td>
                </tr>
                {% endif %}
              </tbody>
            </table>
          </div>


          <div class="col-xs-5">
            <table class="table table-sm steam-profile-table steam-profile-table-bans">
              <tbody>
                <tr>
                  <td>VAC Ban</td>
                  <td>{{ bool_fmt(profile.vac_banned) }}</td>
                </tr>
                <tr>
                  <td>Community Ban</td>
                  <td>{{ bool_fmt(profile.community_banned) }}</td>
                </tr>
                <tr>
                  <td>Economy Ban</td>
                  <td>{{ profile.economy_ban }}</td>
                </tr>
                <tr>
                  <td>Number of Game Bans</td>
                  <td>{{ profile.num_game_bans }}</td>
                </tr>
                <tr>
                  <td>Number of VAC Bans</td>
                  <td>{{ profile.num_vac_bans }}</td>
                </tr>
                {% if profile.vac_banned %}
                <tr>
                  <td>Days Since Last Ban</td>
                  <td>{{ profile.days_since_last_ban }}</td>
                </tr>
                {% endif %}

              </tbody>
            </table>
          </div>
        </div>


        <a href="#" class="btn btn-primary">Do something</a>
      </div>
    </div>



  </div>


  {% if current_user.is_authenticated %}

  <div class="col-lg-4">
    <div class="card">
      <div class="card-header">
        Track
      </div>
      <div class="card-body">
        <p class="card-text">Track this profile in order to get notifications about future bans.</p>

        <form action="/track" method="post">
          <div class="form-group">
            <textarea class="tracking-note" name="note" rows=5 placeholder="Optional note to attach"></textarea>
          </div>
          <div class="form-group text-center">
            <button class="btn btn-lg btn-success" type="submit">Track</button>
          </div>
        </form>

      </div>
    </div>
  </div>

  {% endif %}


</div>

{% endblock content %}
